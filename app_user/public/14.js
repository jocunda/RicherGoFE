"use strict";(self.webpackChunkapp_user=self.webpackChunkapp_user||[]).push([[14],{1014:function(e,t,n){n.r(t);var r=n(7378),a=n(4935),o=n(5781),s=n(9786),l=n(731),c=n(4777),u=n(9293),i=n(4276),f=n(4101),d=n(1654),w=n(7963),m=n(7757),p=n(1509),h=n(854),b=n(3027),v=n(8783),y=n(9118),g=n(249),E=n(2277),P=n(9872),S=n(2870),k=n(9714),N=n(8385),x=n(9736),O=n(8295),z=function(){return z=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},z.apply(this,arguments)};function C(e,t,n,r){return a=this,o=void 0,l=function(){var a,o;return function(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){s.label=l[1];break}if(6===l[0]&&s.label<a[1]){s.label=a[1],a=l;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(l);break}a[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(s){switch(s.label){case 0:return s.trys.push([0,6,,7]),[4,fetch(e,z(z({headers:{Accept:"application/json","Content-Type":"application/json"},method:t},n&&{body:JSON.stringify(n)}),r))];case 1:return 200!==(a=s.sent()).status?[3,3]:[4,a.json()];case 2:return[2,{data:s.sent()}];case 3:return[4,a.json()];case 4:return o=s.sent(),[2,{error:a.status,errorMessage:o}];case 5:return[3,7];case 6:return[2,{error:-1,errorMessage:s.sent().toString()}];case 7:return[2]}}))},new((s=void 0)||(s=Promise))((function(e,t){function n(e){try{c(l.next(e))}catch(e){t(e)}}function r(e){try{c(l.throw(e))}catch(e){t(e)}}function c(t){var a;t.done?e(t.value):(a=t.value,a instanceof s?a:new s((function(e){e(a)}))).then(n,r)}c((l=l.apply(a,o||[])).next())}));var a,o,s,l}var T={get:function(e){return C(e,"GET")},post:function(e,t){return C(e,"POST",t)},put:function(e,t){return C(e,"PUT",t)},batch:function(e,t){return C(e,"BATCH",t)},delete:function(e){return C(e,"DELETE")}},j=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}c((r=r.apply(e,t||[])).next())}))},A=function(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){s.label=l[1];break}if(6===l[0]&&s.label<a[1]){s.label=a[1],a=l;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(l);break}a[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}};function G(e){return j(this,void 0,void 0,(function(){return A(this,(function(t){return[2,T.post("/api/auth/changePassword",e)]}))}))}function I(){return j(this,void 0,void 0,(function(){return A(this,(function(e){return[2,T.delete("/api/auth/logout")]}))}))}function M(){var e=this,t=sessionStorage.getItem("user"),n=(0,o.Me)("toaster"),z=(0,s.P)(n).dispatchToast,C=r.useState("info"),T=C[0],j=C[1],A=function(e){switch(T){case"error":case"info":case"success":case"warning":z(r.createElement(l.F,null,r.createElement(c.M,null,e)),{position:"top-end",intent:T})}},G=(0,a.f_)();console.log("user: ",G);var M=(0,a.s0)(),_=(0,a.UO)().tab,q=(0,S.Z)(k.E9z,k.wxB),B=(0,S.Z)(N.jst,N.mr_);return r.createElement(r.Fragment,null,r.createElement(y.x,{toasterId:n}),r.createElement("div",{className:"SGQq3caMRT30k6NDPzIg"},r.createElement("div",{className:"_E57caGqeAIaIa5wz5vG"},r.createElement(g.E,{alt:"Amanda's avatar",shape:"rounded",src:"https://fabricweb.azureedge.net/fabric-website/assets/images/avatar/AmandaBrady.jpg",height:200,width:200}),r.createElement(E.x,{size:900},t))),r.createElement("div",{className:"j_OAwhojrNG8CpT5WoIQ"},r.createElement(P.t,{defaultSelectedValue:"",vertical:!0,onTabSelect:function(e,t){M("/user/".concat(t.value))},selectedValue:_},r.createElement(r.Fragment,null,r.createElement(u.O,{icon:r.createElement(q,null),value:""},"User Profile"),r.createElement(u.O,{icon:r.createElement(B,null),value:"reset"},"Change Password"),r.createElement(u.O,{icon:r.createElement(x.S5o,null),value:"setting"},"Setting"),r.createElement(i.i,null),r.createElement(f.V,{modalType:"alert"},r.createElement(d.h,{disableButtonEnhancement:!0},r.createElement(w.z,{size:"large",appearance:"subtle",icon:r.createElement(x.ayg,null)},"Logout")),r.createElement(m.c,null,r.createElement(p.a,null,r.createElement(h.$,null,r.createElement(O.TCR,null)),r.createElement(b.c,null,"Proceed to logout?"),r.createElement(v.k,null,r.createElement(d.h,{disableButtonEnhancement:!0},r.createElement(w.z,{appearance:"secondary"},"Cancel")),r.createElement(w.z,{appearance:"primary",onClick:function(){return t=e,n=void 0,a=function(){var e,t,n,r,a,o,s;return function(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){s.label=l[1];break}if(6===l[0]&&s.label<a[1]){s.label=a[1],a=l;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(l);break}a[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}}(this,(function(l){switch(l.label){case 0:return console.log("logout"),sessionStorage.clear(),[4,I()];case 1:return e=l.sent(),t=e.data,n=e.error,r=e.errorMessage,n&&(a=JSON.stringify(r),o=JSON.parse(a),j("error"),A(o.message)),t&&(s=t.message,j("success"),A(s)),M("/"),[2]}}))},new((r=void 0)||(r=Promise))((function(e,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function l(e){try{c(a.throw(e))}catch(e){o(e)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r((function(e){e(n)}))).then(s,l)}c((a=a.apply(t,n||[])).next())}));var t,n,r,a}},"Logout"))))))),r.createElement("div",{className:"a08ehgc3athnUTYaWAuV"},r.createElement(a.j3,null))))}var _=n(7634),q=n(5783),B=n(184),Q=n(9095),F=n(7901),Z=n(5992),J=n(9207),U=n(8039),V=n(1802),D=n(5484),R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},R.apply(this,arguments)},H=function(e,t,n,r){return new(n||(n=Promise))((function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function l(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,l)}c((r=r.apply(e,t||[])).next())}))},L=function(e,t){var n,r,a,o,s={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function l(l){return function(c){return function(l){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(s=0)),s;)try{if(n=1,r&&(a=2&l[0]?r.return:l[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,l[1])).done)return a;switch(r=0,a&&(l=[2&l[0],a.value]),l[0]){case 0:case 1:a=l;break;case 4:return s.label++,{value:l[1],done:!1};case 5:s.label++,r=l[1],l=[0];continue;case 7:l=s.ops.pop(),s.trys.pop();continue;default:if(!((a=(a=s.trys).length>0&&a[a.length-1])||6!==l[0]&&2!==l[0])){s=0;continue}if(3===l[0]&&(!a||l[1]>a[0]&&l[1]<a[3])){s.label=l[1];break}if(6===l[0]&&s.label<a[1]){s.label=a[1],a=l;break}if(a&&s.label<a[2]){s.label=a[2],s.ops.push(l);break}a[2]&&s.ops.pop(),s.trys.pop();continue}l=t.call(e,s)}catch(e){l=[6,e],r=0}finally{n=a=0}if(5&l[0])throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}([l,c])}}},Y=function(e){return"Your password must have at least 1 ".concat(e," character")},W=D.Ry({oldPassword:D.Z_().min(6,"Passsword must be at least 6 characters long").max(12,"Passsword must be below 12 characters").matches(/[0-9]/,Y("digit")).matches(/[a-z]/,Y("lowercase")).matches(/[A-Z]/,Y("uppercase")).matches(/[^\w]/,Y("symbol")).required("Please Enter your Password"),newPassword:D.Z_().min(6,"Passsword must be at least 6 characters long").max(12,"Passsword must be below 12 characters").matches(/[0-9]/,Y("digit")).matches(/[a-z]/,Y("lowercase")).matches(/[A-Z]/,Y("uppercase")).matches(/[^\w]/,Y("symbol")).notOneOf([D.iH("oldPassword")],"New Password cannot be the same as Current Password").required("Please Enter your Password"),confirmNewPassword:D.Z_().required("Please re-enter your new password").oneOf([D.iH("newPassword")],"New Password does not match")}).required(),X=document.getElementById("root"),$=(0,_.s)(X),K=(0,q.aj)([{path:"/",element:r.createElement((function(){return r.createElement(r.Fragment,null,r.createElement("section",{className:"hero"}),r.createElement("main",null,r.createElement("section",null,r.createElement("h1",null,"User Area")),r.createElement(M,null)))}),null),children:[{path:"",element:r.createElement((function(){var e,t,n,u=this,i=(0,o.Me)("toaster"),f=(0,s.P)(i).dispatchToast,d=(0,r.useState)("success"),m=d[0],p=d[1],h=function(e){switch(m){case"error":case"success":f(r.createElement(l.F,null,r.createElement(c.M,null,e)),{position:"top-end",intent:m})}},b=(0,a.f_)();console.log("ResetPasswordForm data: ",b);var v=(0,a.s0)(),g=(0,r.useState)({oldPassword:"password",newPassword:"password",confirmNewPassword:"password"}),E=g[0],P=g[1],S=function(e){P((function(t){var n;return R(R({},t),((n={})[e]="password"===t[e]?"text":"password",n))}))},k=(0,U.cI)({resolver:(0,V.X)(W)}),N=k.register,x=k.handleSubmit,O=k.trigger,z=k.formState,C=z.errors,T=z.isDirty,j=z.isValid,A=function(e){return H(u,void 0,void 0,(function(){return L(this,(function(t){switch(t.label){case 0:return[4,O(e)];case 1:return t.sent(),[2]}}))}))};return r.createElement(r.Fragment,null,r.createElement(y.x,{toasterId:i}),r.createElement("form",{method:"post",onSubmit:x((function(e,t){return H(u,void 0,void 0,(function(){var n,r,a,o,s,l,c,u,i,f;return L(this,(function(d){switch(d.label){case 0:return null==t||t.preventDefault(),n=null!==(f=sessionStorage.getItem("user"))&&void 0!==f?f:"",r=function(e,t){return{username:t,oldPassword:e.oldPassword,newPassword:e.newPassword,confirmNewPassword:e.confirmNewPassword}}(e,n),[4,G(r)];case 1:return a=d.sent(),o=a.data,s=a.error,l=a.errorMessage,s&&(c=JSON.stringify(l),u=JSON.parse(c),p("error"),h(u.message)),o&&(i=o.message,p("success"),h(i),setTimeout((function(){v("/user")}),1500)),[2]}}))}))}))},r.createElement(F.g,{size:"large",label:"Current Password",validationState:C.oldPassword?"error":"none",validationMessage:C.oldPassword?"".concat(null===(e=C.oldPassword)||void 0===e?void 0:e.message):null,required:!0},r.createElement(Z.I,R({size:"large",type:E.oldPassword,contentAfter:"password"===E.oldPassword?r.createElement(J.GQS,{onClick:function(){return S("oldPassword")}}):r.createElement(J.Q0s,{onClick:function(){return S("oldPassword")}})},N("oldPassword"),{onBlur:function(){return A("oldPassword")}}))),r.createElement(F.g,{size:"large",label:"New Password",validationState:C.newPassword?"error":"none",validationMessage:C.newPassword?"".concat(null===(t=C.newPassword)||void 0===t?void 0:t.message):null,required:!0},r.createElement(Z.I,R({size:"large",type:E.newPassword,contentAfter:"password"===E.newPassword?r.createElement(J.GQS,{onClick:function(){return S("newPassword")}}):r.createElement(J.Q0s,{onClick:function(){return S("newPassword")}})},N("newPassword"),{onBlur:function(){return A("newPassword")}}))),r.createElement(F.g,{size:"large",label:"Confirm New Password",validationState:C.confirmNewPassword?"error":"none",validationMessage:C.confirmNewPassword?"".concat(null===(n=C.confirmNewPassword)||void 0===n?void 0:n.message):null,required:!0},r.createElement(Z.I,R({size:"large",type:E.confirmNewPassword,contentAfter:"password"===E.confirmNewPassword?r.createElement(J.GQS,{onClick:function(){return S("confirmNewPassword")}}):r.createElement(J.Q0s,{onClick:function(){return S("confirmNewPassword")}})},N("confirmNewPassword"),{onBlur:function(){return A("confirmNewPassword")}}))),r.createElement(w.z,{appearance:"primary",type:"submit",size:"large",disabled:!T&&!j},"Change Password")))}),null)}]}]);$.render(r.createElement(r.StrictMode,null,r.createElement(B.r,{theme:Q.Y},r.createElement(a.pG,{router:K}))))}}]);
//# sourceMappingURL=14.js.map